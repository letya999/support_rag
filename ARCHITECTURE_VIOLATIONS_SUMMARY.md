# –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π

## –ö–∞—Ä—Ç–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï (‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   app/api       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
                         ‚îÇ import
                         ‚ñº
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ   app/nodes     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
                         ‚ñ≤                  ‚îÇ
                         ‚îÇ                  ‚îÇ
                    import                  ‚îÇ import
                         ‚îÇ                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ app/services    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ app/integrations‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñ≤
                         ‚îÇ
                    import
                         ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ  app/storage    ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–û–ë–õ–ï–ú–´:
- storage ‚Üí nodes (vector_store.py)
- integrations ‚Üí nodes (translation.py)
- services ‚Üí nodes (embedding_classifier.py)
- services ‚Üí pipeline (session.py)
- api ‚Üí nodes –Ω–∞–ø—Ä—è–º—É—é (routes.py)
```

---

```
–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (‚úÖ –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   app/api       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  app/pipeline   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ rag_graph
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   app/nodes     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  app/services   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ app/integrations‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  app/storage    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ app/observability‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–ê–í–ò–õ–û: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω–∏–∑, –æ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∫ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º
```

---

## –¢–æ–ø-5 —Ñ–∞–π–ª–æ–≤ –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ü—Ä–æ–±–ª–µ–º | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|-------|---------|-----------|
| `app/api/routes.py` | 725 | 4 –Ω–∞—Ä—É—à–µ–Ω–∏—è | üî• **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π** |
| `app/services/cache/manager.py` | 434 | 2 –Ω–∞—Ä—É—à–µ–Ω–∏—è | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π |
| `app/pipeline/graph.py` | 376 | 3 –Ω–∞—Ä—É—à–µ–Ω–∏—è | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π |
| `app/storage/persistence.py` | 214 | 1 –Ω–∞—Ä—É—à–µ–Ω–∏–µ | üìã –°—Ä–µ–¥–Ω–∏–π |
| `app/observability/state_validator.py` | 174 | 1 –Ω–∞—Ä—É—à–µ–Ω–∏–µ | üîß –ù–∏–∑–∫–∏–π |

---

## –ù–∞—Ä—É—à–µ–Ω–∏—è –ø–æ —Ç–∏–ø–∞–º

```
üî¥ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: 6
   ‚îú‚îÄ storage ‚Üí nodes (1)
   ‚îú‚îÄ integrations ‚Üí nodes (2)
   ‚îú‚îÄ services ‚Üí nodes (1)
   ‚îú‚îÄ services ‚Üí pipeline (1)
   ‚îî‚îÄ api ‚Üí nodes (1)

üü° –ù–∞—Ä—É—à–µ–Ω–∏—è SRP: 7
   ‚îú‚îÄ –§–∞–π–ª—ã >300 —Å—Ç—Ä–æ–∫ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—è–º–∏ (4)
   ‚îú‚îÄ God Objects (2)
   ‚îî‚îÄ –°–º–µ—à–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤ (1)

üü† –ù–µ—á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: 3
   ‚îú‚îÄ Side effects –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ (1)
   ‚îú‚îÄ –°–º–µ—à–µ–Ω–∏–µ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (1)
   ‚îî‚îÄ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ endpoints (1)
```

---

## Quick Wins (–º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞ 1-2 –¥–Ω—è)

### 1. –í—ã–¥–µ–ª–∏—Ç—å translator –≤ —Å–µ—Ä–≤–∏—Å
```bash
# –°–æ–∑–¥–∞—Ç—å:
app/services/translation/translator.py

# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–∑:
app/nodes/query_translation/translator.py

# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤:
- app/nodes/query_translation/node.py
- app/integrations/translation.py
```

### 2. –í—ã–¥–µ–ª–∏—Ç—å SemanticClassificationService
```bash
# –°–æ–∑–¥–∞—Ç—å:
app/services/classification/semantic_service.py

# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–∑:
app/nodes/easy_classification/semantic_classifier.py

# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤:
- app/nodes/easy_classification/node.py
- app/services/metadata_generation/embedding_classifier.py
```

### 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å storage/vector_store.py
```python
# ‚ùå –°–µ–π—á–∞—Å:
from app.nodes.retrieval.storage import vector_search
from app.nodes.lexical_search.storage import lexical_search_db

# ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
from app.storage.vector_operations import vector_search
from app.storage.lexical_operations import lexical_search_db
```

### 4. –°–æ–∑–¥–∞—Ç—å app/services/search.py
```python
# –ù–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è API layer
async def search_documents(query: str, top_k: int):
    """–û–±–µ—Ä—Ç–∫–∞ –¥–ª—è vector search"""
    emb = await get_embedding(query)
    return await vector_search(emb, top_k)
```

### 5. –°–æ–∑–¥–∞—Ç—å app/services/config_manager.py
```python
class ConfigManager:
    @staticmethod
    async def clear_all_caches():
        """–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–µ–π"""
        clear_config_cache()
        clear_filter_cache()
        return {"status": "ok"}
```

---

## –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (6 –Ω–µ–¥–µ–ª—å)

### –ù–µ–¥–µ–ª—è 1-2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚úÖ

**–ó–∞–¥–∞—á–∏:**
- [ ] –í—ã–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ nodes –≤ storage/services (4 —Ñ–∞–π–ª–∞)
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å app/api/routes.py –Ω–∞ 4 —Ä–æ—É—Ç–µ—Ä–∞
- [ ] –°–æ–∑–¥–∞—Ç—å app/services/search.py
- [ ] –°–æ–∑–¥–∞—Ç—å app/services/config_manager.py

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, API <200 —Å—Ç—Ä–æ–∫ –Ω–∞ —Ñ–∞–π–ª

### –ù–µ–¥–µ–ª—è 3-4: –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å pipeline ‚ö†Ô∏è

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å app/pipeline/graph.py –Ω–∞ 4 –º–æ–¥—É–ª—è
- [ ] –°–æ–∑–¥–∞—Ç—å NodeRegistry —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º –Ω–æ–¥
- [ ] –£–¥–∞–ª–∏—Ç—å config_proxy.py
- [ ] –°–æ–∑–¥–∞—Ç—å PipelineLogger –¥–ª—è structured logging
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å conversation_config –≤ services

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–∏–±–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–¥, <150 —Å—Ç—Ä–æ–∫ –Ω–∞ —Ñ–∞–π–ª

### –ù–µ–¥–µ–ª—è 5-6: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å–æ–≤ üìã

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å CacheManager –Ω–∞ 4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å PersistenceManager –Ω–∞ 4 —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å SessionManager –Ω–∞ Redis CRUD + DialogState
- [ ] –°–æ–∑–¥–∞—Ç—å app/services/metadata_analyzer.py

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### –û—Ç–ª–æ–∂–µ–Ω–æ ‚è∏Ô∏è

- **BaseNode —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–æ–¥
- **state_validator.py —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ

---

---

## –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Layered Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Presentation Layer                   ‚îÇ
‚îÇ          app/api/                             ‚îÇ
‚îÇ  (HTTP endpoints, request/response models)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Application Layer                    ‚îÇ
‚îÇ          app/pipeline/                        ‚îÇ
‚îÇ  (Orchestration, graph building, routing)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Domain Layer                         ‚îÇ
‚îÇ          app/nodes/                           ‚îÇ
‚îÇ  (Business logic, RAG nodes, contracts)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Service Layer    ‚îÇ   Integration Layer      ‚îÇ
‚îÇ   app/services/    ‚îÇ   app/integrations/      ‚îÇ
‚îÇ (Reusable logic)   ‚îÇ (External APIs: LLM, etc)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Infrastructure    ‚îÇ   Observability          ‚îÇ
‚îÇ  app/storage/      ‚îÇ   app/observability/     ‚îÇ
‚îÇ (DB, Vector Store) ‚îÇ (Tracing, Validation)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∞–≤–∏–ª–æ:** –ö–∞–∂–¥—ã–π —Å–ª–æ–π –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç —Å–ª–æ–µ–≤ –Ω–∏–∂–µ —Å–µ–±—è.

---

## Checklist –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞/–º–æ–¥—É–ª—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] **SRP**: –§–∞–π–ª –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–æ–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏?
- [ ] **Dependency Rule**: –ò–º–ø–æ—Ä—Ç—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω–∏–∑ –ø–æ —Å–ª–æ—è–º?
- [ ] **Size**: –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç <300 —Å—Ç—Ä–æ–∫?
- [ ] **Pure Functions**: –§—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–º–µ—é—Ç —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)?
- [ ] **Testability**: –ö–æ–¥ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ?
- [ ] **DRY**: –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞?
- [ ] **Naming**: –ò–º–µ–Ω–∞ —è—Å–Ω–æ –æ—Ç—Ä–∞–∂–∞—é—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å?

---

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ —Å–º. `ARCHITECTURE_AUDIT_REPORT.md`
