node:
  name: dialog_analysis
  enabled: true

# Числовые и булевые параметры
parameters:
  negative_sentiment_threshold: -0.3
  detect_repeated_questions: true
  detect_topic_loop: true
  topic_loop_similarity_threshold: 0.9  # Higher threshold for English embeddings (translation-based approach)
  topic_loop_window_size: 4
  topic_loop_min_messages: 3
  inference_timeout_ms: 3000
  
  # LLM Configuration (для llm mode)
  llm:
    # Модель для анализа диалога (оптимизирована для скорости и цены)
    # Рекомендации:
    # - gpt-4.1-mini: $0.40/$1.60 - баланс скорости/качества (рекомендуется)
    # - gpt-5-nano: $0.05/$0.40 - самая дешевая (для высоконагруженных систем)
    # - gpt-4o-mini: $0.15/$0.60 - предыдущий вариант
    model: "gpt-4o-mini"
    
    # Температура (0.0 = детерминированная классификация)
    temperature: 0.0

# Текстовые настройки и словари
config:
  # Режим работы анализа диалога:
  # - "rule_based": (по умолчанию) Быстрый поиск по ключевым словам (regex). Низкая задержка (<10ms), но не понимает контекст и опечатки.
  # - "llm": Использование LLM для анализа интентов, эмоций и безопасности. Высокая точность, понимание контекста, но выше задержка (~500ms).
  mode: llm
  
  keywords:
    escalation:
      - оператор
      - человек
      - менеджер
      - соедините
      - operator
      - human
      - agent
      - transfer
    gratitude:
      - спасибо
      - благодарю
      - thank
      - thanks
      - хорошего дня
      - good day
    frustration:
      - тупой
      - плохой
      - ужас
      - stupid
      - useless
      - bad
      - hate
