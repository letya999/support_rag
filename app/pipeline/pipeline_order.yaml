# Pipeline Node Execution Order
# This file defines the standard sequence of nodes in the RAG pipeline
# Modify this file to change the order of nodes in the generated pipeline_config.yaml
# 
# SECURITY NOTE: input_guardrails MUST execute BEFORE check_cache
# to prevent malicious content from bypassing safety via cached responses

pipeline_order:
  - session_starter
  - input_guardrails  # Blocks dangerous content BEFORE cache check
  - check_cache       # Only checked for safe content
  - language_detection
  - dialog_analysis
  - aggregation
  - query_translation  # Translate query to document language for unified search
  - easy_classification
  - classify
  - metadata_filtering
  - expand_query
  - hybrid_search
  - retrieve
  - lexical_search
  - fusion
  - reranking
  - multihop
  - state_machine  # Moved here to have access to final confidence from reranking
  - routing
  - prompt_routing
  - generation
  - output_guardrails
  - archive_session
  - store_in_cache

