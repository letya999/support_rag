# üìã Roadmap Multi-Hop + Cache + Telegram ‚Äî –ö–†–ê–¢–ö–ê–Ø –°–í–û–î–ö–ê

**14-18 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–∞**

---

## üéØ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

```
–î–û:                          –ü–û–°–õ–ï:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–æ—Å—Ç–æ–π RAG  ‚îÇ            ‚îÇ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π RAG      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§            ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ü–æ–∏—Å–∫ ‚Üí –ì–µ–Ω  ‚îÇ    ‚îÅ‚îÅ‚îÅ>    ‚îÇ Cache                ‚îÇ
‚îÇ              ‚îÇ            ‚îÇ ‚Üì                    ‚îÇ
‚îÇ              ‚îÇ            ‚îÇ Multi-Hop (—Å–ª–æ–∂–Ω. Q) ‚îÇ
‚îÇ              ‚îÇ            ‚îÇ ‚Üì                    ‚îÇ
‚îÇ              ‚îÇ            ‚îÇ Generate + Rate      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

API —Ç–æ–ª—å–∫–æ                  + Telegram Bot
HTTP—Ö                       + –î–∏–∞–ª–æ–≥–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
                           + –ò—Å—Ç–æ—Ä–∏—è + –û—Ü–µ–Ω–∫–∏
```

---

## üìä –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤

| –≠—Ç–∞–ø | –ù–∞–∑–≤–∞–Ω–∏–µ | –î–Ω–µ–π | –û—Å–Ω–æ–≤–Ω–æ–µ | –§–∞–π–ª—ã |
|------|----------|------|----------|-------|
| 1 | **Multi-Hop** | 5-6 | –°–ª–æ–∂–Ω—ã–µ Q ‚Üí —Ü–µ–ø–æ—á–∫–∏ docs | 5 —Ñ–∞–π–ª–æ–≤ |
| 2 | **Cache** | 3-4 | –ë—ã—Å—Ç—Ä–æ –æ—Ç–≤–µ—Ç—ã –Ω–∞ FAQ | 4 —Ñ–∞–π–ª–∞ |
| 3 | **Telegram** | 4-5 | –î–∏–∞–ª–æ–≥–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | 8+ —Ñ–∞–π–ª–æ–≤ |
| 4 | **Dialog Logic** | 2-3 | Follow-up Q + Feedback | 3 —Ñ–∞–π–ª–∞ |
| **–í–°–ï–ì–û** | - | **14-18** | **MVP –≥–æ—Ç–æ–≤** | **~20 —Ñ–∞–π–ª–æ–≤** |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫–∞

```
User Question
      ‚Üì
‚îå‚îÄ CACHE HIT? ‚îÄ YES ‚Üí Return cached answer ‚îÄ‚îÄ‚îê
‚îÇ              ‚îÇ                               ‚îÇ
‚îÇ              NO                              ‚Üì
‚îÇ              ‚Üì                           Response
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    ‚îÇ  RAG Pipeline                   ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    ‚îÇ 1. Classify (intent, category)  ‚îÇ
‚îÇ    ‚îÇ 2. Metadata Filter              ‚îÇ
‚îÇ    ‚îÇ 3. Retrieve Q&A                 ‚îÇ
‚îÇ    ‚îÇ 4. Check Complexity             ‚îÇ
‚îÇ    ‚îÇ 5. Multi-Hop? ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ    ‚îÇ    ‚Üì                ‚îÇ            ‚îÇ
‚îÇ    ‚îÇ 6. Generate        ‚îÇ YES:       ‚îÇ
‚îÇ    ‚îÇ 7. Store Cache     ‚îÇ - Find related Q&A by:
‚îÇ    ‚îÇ 8. Route           ‚îÇ   * category  ‚îÇ
‚îÇ    ‚îÇ                    ‚îÇ   * intent    ‚îÇ
‚îÇ    ‚îÇ                    ‚îÇ   * clarifying_questions
‚îÇ    ‚îÇ                    ‚îÇ - Merge answers ‚Üí Enhanced context
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ              ‚Üì
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Format & Send ‚îÄ‚îÄ‚Üí Telegram/API
                ‚Üì
           Rating / Feedback
```

**Multi-Hop uses existing fields:**
- `metadata.category` ‚Üí Find Q&A in same category
- `metadata.intent` ‚Üí Find Q&A with same/related intent
- `metadata.clarifying_questions` ‚Üí Navigate to related topics
- **NO new fields added** to Q&A JSON structure

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–Ω–æ–≤—ã–µ)

```
app/
‚îú‚îÄ‚îÄ nodes/
‚îÇ   ‚îî‚îÄ‚îÄ multihop/                    [–≠–¢–ê–ü 1]
‚îÇ       ‚îú‚îÄ‚îÄ complexity_detector.py   (–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å)
‚îÇ       ‚îú‚îÄ‚îÄ hop_resolver.py          (–Ω–∞–π—Ç–∏ —Ü–µ–ø–æ—á–∫—É docs)
‚îÇ       ‚îú‚îÄ‚îÄ relation_graph.py        (–≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π)
‚îÇ       ‚îú‚îÄ‚îÄ context_merger.py        (–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã)
‚îÇ       ‚îú‚îÄ‚îÄ models.py
‚îÇ       ‚îú‚îÄ‚îÄ node.py
‚îÇ       ‚îî‚îÄ‚îÄ tests/
‚îÇ
‚îú‚îÄ‚îÄ cache/                           [–≠–¢–ê–ü 2]
‚îÇ   ‚îú‚îÄ‚îÄ query_normalizer.py          (–ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ)
‚îÇ   ‚îú‚îÄ‚îÄ cache_layer.py               (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
‚îÇ   ‚îú‚îÄ‚îÄ cache_stats.py               (–º–µ—Ç—Ä–∏–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ nodes.py
‚îÇ   ‚îî‚îÄ‚îÄ tests/
‚îÇ
‚îî‚îÄ‚îÄ integrations/
    ‚îî‚îÄ‚îÄ telegram/                    [–≠–¢–ê–ü 3]
        ‚îú‚îÄ‚îÄ bot_handler.py           (–æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç)
        ‚îú‚îÄ‚îÄ session_manager.py       (—Å–µ—Å—Å–∏–∏ —é–∑–µ—Ä–æ–≤)
        ‚îú‚îÄ‚îÄ dialog_manager.py        (–ª–æ–≥–∏–∫–∞ –¥–∏–∞–ª–æ–≥–∞)
        ‚îú‚îÄ‚îÄ context_store.py         (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
        ‚îú‚îÄ‚îÄ models.py
        ‚îú‚îÄ‚îÄ commands/
        ‚îÇ   ‚îú‚îÄ‚îÄ start.py
        ‚îÇ   ‚îú‚îÄ‚îÄ ask.py
        ‚îÇ   ‚îú‚îÄ‚îÄ clear.py             ‚Üê –û–ß–ò–°–¢–ö–ê –ö–û–ù–¢–ï–ö–°–¢–ê
        ‚îÇ   ‚îú‚îÄ‚îÄ history.py
        ‚îÇ   ‚îú‚îÄ‚îÄ rate.py
        ‚îÇ   ‚îî‚îÄ‚îÄ settings.py
        ‚îî‚îÄ‚îÄ tests/

scripts/
‚îî‚îÄ‚îÄ run_telegram_bot.py              [–≠–¢–ê–ü 3]
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ —ç—Ç–∞–ø–∞–º

### –≠–¢–ê–ü 1: Multi-Hop (5-6 –¥–Ω–µ–π) üß†

```
–ü—Ä–æ—Å—Ç–æ–π Q: "–ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å?"
  ‚Üí retrieve() ‚Üí answer ‚úì

–°–ª–æ–∂–Ω—ã–π Q: "–ü–æ—á–µ–º—É —è –Ω–µ –º–æ–≥—É —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –µ—Å–ª–∏ –∑–∞–±—ã–ª –µ–º—ç–∏–ª?"
  ‚Üí complexity = HIGH
  ‚Üí hop 1: –Ω–∞–π—Ç–∏ "—Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è"
  ‚Üí hop 2: –Ω–∞–π—Ç–∏ "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –µ–º—ç–∏–ª"
  ‚Üí hop 3: –Ω–∞–π—Ç–∏ "—Å–≤—è–∑—å –º–µ–∂–¥—É –Ω–∏–º–∏"
  ‚Üí merge contexts ‚Üí answer ‚úì‚úì‚úì
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- +20-30% recall –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–µ–ø–æ—á–µ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ–ø. LLM –≤—ã–∑–æ–≤–æ–≤

---

### –≠–¢–ê–ü 2: Cache (3-4 –¥–Ω—è) ‚ö°

```
FAQ: "–ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å?"
     "How to reset password?"
     "how reset my password?" ‚Üê —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: "reset password"
         ‚Üì
    CACHE HIT! ‚Üí return –≤ 100ms –≤–º–µ—Å—Ç–æ 2000ms
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Hit rate ~40% –Ω–∞ production –¥–∞–Ω–Ω—ã—Ö
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ 80-90% –¥–ª—è FAQ
- –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ >100—á/–º–µ—Å—è—Ü

---

### –≠–¢–ê–ü 3: Telegram (4-5 –¥–Ω–µ–π) üí¨

```
User: /ask "–ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å?"
Bot:  "–í—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥–∏..."
      [–û—Ü–µ–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê] ‚Üê inline buttons

User: /clear
Bot:  "–í—ã —É–≤–µ—Ä–µ–Ω—ã?" [–î–∞] [–ù–µ—Ç] ‚Üê –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
      ‚úì –ò—Å—Ç–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞

User: /history
Bot:  –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
```

**–ö–æ–º–∞–Ω–¥—ã:**
- `/start` ‚Äî –Ω–∞—á–∞—Ç—å
- `/ask "Q"` ‚Äî –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
- `/clear` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é ‚Üê –ì–õ–ê–í–ù–û–ï
- `/history` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
- `/rate ‚≠ê‚≠ê‚≠ê‚≠ê` ‚Äî –æ—Ü–µ–Ω–∏—Ç—å
- `/settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–∏–∞–ª–æ–≥–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
- –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
- –°–±–æ—Ä –æ—Ü–µ–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### –≠–¢–ê–ü 4: Dialog Logic (2-3 –¥–Ω—è) üó£Ô∏è

```
–ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞:

1. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 3 —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞
   "–í–∞—Å –º–æ–∂–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å:
    - –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–º—ç–∏–ª?
    - –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–æ–¥ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç?
    - –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç —Å–±—Ä–æ—Å?"

2. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ—Ü–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç (inline buttons)
   [‚≠ê] [‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê]

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å feedback –≤ Langfuse
   ‚Üí –£–ª—É—á—à–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥–æ–≤—ã–π flow

---

## üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

```
PostgreSQL (–¥–æ–∫—É–º–µ–Ω—Ç—ã, embeddings):
  documents_with_embeddings
  ‚îú‚îÄ id, content, embedding, metadata
  ‚îú‚îÄ metadata: {category, intent, see_also, has_complete_answer}

Redis (–∫—ç—à):
  cache:query_hash ‚Üí {answer, sources, confidence, TTL}
  session:user_id ‚Üí {history, context}

Langfuse (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥):
  traces (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã)
  ‚îú‚îÄ user_id, session_id, complexity_level
  ‚îú‚îÄ cache_hit, multihop_used
  ‚îú‚îÄ response_time, user_rating
```

---

## üé¨ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### Development:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 2. –°—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d  # PostgreSQL + Redis

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å RAG API
uvicorn app.main:app --reload

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å Telegram –±–æ—Ç
python scripts/run_telegram_bot.py
```

### .env (–ø—Ä–∏–º–µ—Ä):

```
DATABASE_URL=postgresql://user:pass@localhost:5432/rag
REDIS_URL=redis://localhost:6379
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

OPENAI_API_KEY=sk-...
LANGFUSE_PUBLIC_KEY=pk-...
LANGFUSE_SECRET_KEY=sk-...
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|----|----|
| **Recall (—Å–ª–æ–∂–Ω—ã–µ Q)** | 60% | 80-85% ‚¨ÜÔ∏è |
| **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (FAQ)** | 2000ms | 100ms ‚¨áÔ∏è |
| **% –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –∫—ç—à–µ–º** | 0% | 40% ‚¨ÜÔ∏è |
| **–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (Telegram)** | - | +Feedback |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |

---

## üîÑ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏

```
–≠–¢–ê–ü 1 (Multi-Hop)
  ‚îú‚îÄ State updates ‚îÄ‚îÄ‚îê
  ‚îÇ                  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí –≠–¢–ê–ü 3 (Telegram)
  ‚îÇ                  ‚îÇ
  ‚îÇ            –≠–¢–ê–ü 2 (Cache) ‚Üê API
  ‚îÇ                  ‚Üì
  ‚îÇ            –≠–¢–ê–ü 4 (Dialog)
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ú–æ–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:**
- –≠—Ç–∞–ø 1 & 2 ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ
- –≠—Ç–∞–ø 3 ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π State
- –≠—Ç–∞–ø 4 ‚Äî —Ç—Ä–µ–±—É–µ—Ç –≠—Ç–∞–ø 3

---

## ‚è∞ Timeline (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)

```
–î–µ–Ω—å 1-6:   –≠—Ç–∞–ø 1 (Multi-Hop) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
–î–µ–Ω—å 7-10:  –≠—Ç–∞–ø 2 (Cache)     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
–î–µ–Ω—å 11-15: –≠—Ç–∞–ø 3 (Telegram)  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
–î–µ–Ω—å 16-18: –≠—Ç–∞–ø 4 (Dialog)    ‚ñà‚ñà‚ñà‚ñà
           ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
           –ò—Ç–æ–≥–æ: 18 –¥–Ω–µ–π
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±—ã—Å—Ç—Ä–µ–µ, –Ω—É–∂–Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)

```
–î–µ–Ω—å 1-6:   ‚ñà‚ñà‚ñà‚ñà Multi-Hop (Team A)
            ‚ñà‚ñà‚ñà‚ñà Cache (Team B)    ‚Üê –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
–î–µ–Ω—å 7-11:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà Telegram (Team C)
–î–µ–Ω—å 12-14: ‚ñà‚ñà‚ñà Dialog Logic (Team A)
           ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
           –ò—Ç–æ–≥–æ: 14 –¥–Ω–µ–π
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [ ] Multi-Hop –¥–µ—Ç–µ–∫—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: >85% accuracy
- [ ] Cache hit rate: >40% –Ω–∞ production
- [ ] Telegram –±–æ—Ç: 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `/clear` —Ä–∞–±–æ—Ç–∞–µ—Ç: –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] Follow-up questions: >90% —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã
- [ ] E2E —Ç–µ—Å—Ç: Q ‚Üí –û—Ç–≤–µ—Ç ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –≤ **ROADMAP_MULTIHOP_TELEGRAM.md**
2. –°–æ–∑–¥–∞—Ç—å issue –≤ GitHub
3. –û–±—Å—É–¥–∏—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞ standup

**Happy coding! üöÄ**

---

## üìö –§–∞–π–ª—ã –¥–ª—è —á—Ç–µ–Ω–∏—è

- [`ROADMAP_MULTIHOP_TELEGRAM.md`](./ROADMAP_MULTIHOP_TELEGRAM.md) ‚Äî –ø–æ–ª–Ω—ã–π roadmap —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç–∞–ª—è–º–∏
- [`CLAUDE.md`](./CLAUDE.md) ‚Äî –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞
- [`implementation_plan_ru.md`](./implementation_plan_ru.md) ‚Äî –ø–ª–∞–Ω—ã —ç—Ç–∞–ø–æ–≤ 3-4 –±–∞–∑–æ–≤–æ–π pipeline
