# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É–∑–ª–æ–≤ RAG Pipeline - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

**–î–∞—Ç–∞:** 2026-01-06
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–ê–≤—Ç–æ—Ä:** Claude Code Architecture Analysis

---

## –û—Å–Ω–æ–≤–Ω–æ–π –≤–æ–ø—Ä–æ—Å

> "–ü—Ä–æ–≤–µ–¥–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–∏–∫–∞–∫–∞—è –Ω–æ–¥–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–π –∂–µ—Å—Ç–∫–æ –∏ –∏—Ö –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–≥–ª–∞—Å—É—è –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã"

---

## ‚úÖ –û—Ç–≤–µ—Ç

**–ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:** ‚ùå **–ù–ï–¢ - –µ—Å—Ç—å –∂–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞.**

–ê–Ω–∞–ª–∏–∑ –≤—ã—è–≤–∏–ª **5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∂–µ—Å—Ç–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –Ω–∞—Ä—É—à–∞—Ç—å, –Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è **–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É–∑–ª–æ–≤ (70%) –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã** –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞.

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–∏–±–∫–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|---------|
| **–í—Å–µ–≥–æ —É–∑–ª–æ–≤** | 24 –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–∑–ª–∞ |
| **–ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–∏ |
| **–ì–∏–±–∫–∏–µ —É–∑–ª—ã (100% –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ)** | 8 —É–∑–ª–æ–≤ (33%) |
| **–£—Å–ª–æ–≤–Ω–æ –≥–∏–±–∫–∏–µ —É–∑–ª—ã (50%)** | 12 —É–∑–ª–æ–≤ (50%) |
| **–ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ —É–∑–ª—ã (0%)** | 4 —É–∑–ª–∞ (17%) |

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∂–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å #1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –∫–µ—à–µ–º

```
session_starter ‚Üí input_guardrails ‚Üí check_cache
```

**–ü–æ—á–µ–º—É –∂–µ—Å—Ç–∫–∞—è:** –ï—Å–ª–∏ `check_cache` –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–µ—Ä–µ–¥ `input_guardrails`, –º–∞–ª–∏—Ü–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –∫–µ—à.

**–ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å:** ‚ùå **–ù–ò–ö–û–ì–î–ê**

**–§–∞–π–ª—ã:**
- `/app/pipeline/graph.py:160-182` - —è–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- `/app/pipeline/pipeline_order.yaml:5-7` - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å #2: Fusion —Ç—Ä–µ–±—É–µ—Ç –û–ë–ï —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞

```
retrieve + lexical_search ‚Üí fusion
```

**–ü–æ—á–µ–º—É –∂–µ—Å—Ç–∫–∞—è:** `fusion` —á–∏—Ç–∞–µ—Ç `vector_results` –∏ `lexical_results`. –ï—Å–ª–∏ –æ–¥–Ω–æ–≥–æ –Ω–µ—Ç, fusion –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ:**

```python
# /app/nodes/fusion/node.py:11-12
vector_results = state.get("vector_results", [])
lexical_results = state.get("lexical_results", [])
# –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –ø—É—Å—Ç, fusion –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç–æ–π docs
```

**–ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å:** ‚ùå **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fusion**

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ò–õ–ò `hybrid_search` –ò–õ–ò –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ (retrieve + lexical_search)

---

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å #3: Reranking ‚Üí State Machine

```
reranking ‚Üí state_machine
```

**–ü–æ—á–µ–º—É:** `state_machine` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `confidence` –∏–∑ `reranking` –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π.

**–§–∞–π–ª:** `/app/nodes/state_machine/node.py:54` —á–∏—Ç–∞–µ—Ç `confidence`

**–ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å:** ‚ö†Ô∏è **–ú–æ–∂–Ω–æ, –µ—Å–ª–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å confidence –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º**

---

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å #4: State Machine ‚Üí Routing

```
state_machine ‚Üí routing
```

**–ü–æ—á–µ–º—É:** `routing` —Ç—Ä–µ–±—É–µ—Ç `action_recommendation` –æ—Ç `state_machine`.

**–§–∞–π–ª:** `/app/nodes/routing/node.py:44` —á–∏—Ç–∞–µ—Ç `action_recommendation`

**–ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å:** ‚ùå **–ù–ò–ö–û–ì–î–ê** - –ø—Ä—è–º–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

---

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å #5: Routing ‚Üí Generation

```
routing ‚Üí generation (—É—Å–ª–æ–≤–Ω—ã–π)
```

**–ü–æ—á–µ–º—É:** `routing` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∏–¥—Ç–∏ –ª–∏ –≤ `generation` –∏–ª–∏ END.

**–§–∞–π–ª:** `/app/pipeline/graph.py:259-273` - conditional routing

**–ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å:** ‚ùå **–ù–ò–ö–û–ì–î–ê** - —ç—Ç–æ –≥—Ä–∞—Ñ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º

---

## ‚úÖ –ì–∏–±–∫–∏–µ —É–∑–ª—ã (70% –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —É–∑–ª—ã

–≠—Ç–∏ —É–∑–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ:

| –£–∑–µ–ª | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç | –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤–µ–∑–¥–µ |
|------|-----------|-----------------|
| `language_detection` | –¢–æ–ª—å–∫–æ `question` | ‚úÖ –î–∞ |
| `output_guardrails` | –¢–æ–ª—å–∫–æ `answer` | ‚úÖ –î–∞ |
| `archive_session` | –¢–æ–ª—å–∫–æ `answer, dialog_state` | ‚úÖ –î–∞ |
| `store_in_cache` | –¢–æ–ª—å–∫–æ `answer` | ‚úÖ –î–∞ |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ú–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏–ª–∏ –≤ –ª—é–±–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –£—Å–ª–æ–≤–Ω–æ –≥–∏–±–∫–∏–µ —É–∑–ª—ã

–≠—Ç–∏ —É–∑–ª—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:

| –£–∑–µ–ª | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç | –ú–æ–∂–µ—Ç –±—ã—Ç—å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-----------|----------|----------|
| `aggregation` | `question, conversation_history` | –†–∞–Ω—å—à–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ |
| `easy_classification` | `translated_query \| aggregated_query` | –î–æ/–ø–æ—Å–ª–µ aggregation | ‚úÖ –ò–º–µ–µ—Ç fallbacks |
| `metadata_filtering` | `semantic_category` (–∏–∑ classification) | –ü–æ—Å–ª–µ classification | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç easy_classification |
| `expand_query` | `question` | –î–æ/–ø–æ—Å–ª–µ search | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º |
| `multihop` | `docs` (–∏–∑ reranking) | –ü–æ—Å–ª–µ reranking | ‚úÖ –ò–º–µ–µ—Ç skip logic |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ú–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã, –µ—Å–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

---

## üìà –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–≠—Ç–∏ —É–∑–ª—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª: 35% —É—Å–∫–æ—Ä–µ–Ω–∏–µ):

```
‚îå‚îÄ language_detection
‚îú‚îÄ easy_classification  ‚îÄ‚îÄ‚Üí metadata_filtering
‚îú‚îÄ dialog_analysis
‚îî‚îÄ aggregation
```

### –£—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–≠—Ç–∏ —É–∑–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω—ã –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö:

| –£–∑–µ–ª | –£—Å–ª–æ–≤–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ | –≠–∫–æ–Ω–æ–º–∏—è |
|------|------------------|---------|
| `multihop` | confidence > 0.8 | 50-100ms |
| `expand_query` | classification —É–≤–µ—Ä–µ–Ω–∞ | 10-20ms |
| `reranking` | –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç | 5-10ms |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò (–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å)

1. **–†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É fusion**
   - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `graph.py`
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `pipeline_order.yaml`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful degradation

2. **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ docstrings**
   - –ö–∞–∂–¥—ã–π —É–∑–µ–ª –¥–æ–ª–∂–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã
   - –£–∫–∞–∑–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

3. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é pipeline_order.yaml**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (fusion –±–µ–∑ –ø–æ–∏—Å–∫–∞)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç üü° –í–´–°–û–ö–ò–ô (–≤ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏)

1. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∏ –ø–æ–ª—è `docs`
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

2. **–î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞
   - –¢–µ—Å—Ç—ã –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ø—É—Å—Ç—ã–µ –≤—Ö–æ–¥—ã)

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã 1
   - –ò–∑–º–µ—Ä–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç üü¢ –°–†–ï–î–ù–ò–ô (–≤ –±—É–¥—É—â–µ–º)

1. **–¢—Ä–µ–∫–∏–Ω–≥ –≤ Langfuse**
   - –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ state management**
   - –û—Ç–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–µ—à–µ–Ω–∏–π –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –°–¥–µ–ª–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –µ—â–µ –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω–æ–π

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ |
|----------|-----------|
| **ARCHITECTURE_ANALYSIS.md** | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ –∏ –º–µ—Ä–º–µ–π–¥-–≥—Ä–∞—Ñ–∏–∫–æ–º |
| **DEPENDENCY_MATRIX.md** | –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —É–∑–ª–æ–≤, —Ç–∞–±–ª–∏—Ü—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |
| **ARCHITECTURE_IMPROVEMENTS.md** | –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –∫–æ–¥ –ø—Ä–∏–º–µ—Ä—ã, —á–µ–∫-–ª–∏—Å—Ç—ã |
| **ARCHITECTURE_ANALYSIS_SUMMARY.md** | –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç - –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç |

---

## üîç –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ö–æ—Ä–æ—à–æ

‚úÖ **–°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É–∑–ª–æ–≤ –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `State`, –∞ –Ω–µ –ø—Ä—è–º—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
‚úÖ **–•–æ—Ä–æ—à–∏–µ fallbacks:** –£–∑–ª—ã –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —É–∑–ª—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
‚úÖ **–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è Langfuse

### –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

‚ö†Ô∏è **–ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Ä—É—à–µ–Ω—ã
‚ö†Ô∏è **–°–∫—Ä—ã—Ç—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ù–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞ fusion:** –¢—Ä–µ–±—É–µ—Ç –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –±–µ–∑ graceful degradation
‚ö†Ô∏è **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

---

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ ARCHITECTURE_ANALYSIS.md** –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ DEPENDENCY_MATRIX.md** –¥–ª—è –º–∞—Ç—Ä–∏—Ü—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. **–°–ª–µ–¥—É–π—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º ARCHITECTURE_IMPROVEMENTS.md** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### –î–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–≤

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –∫–∞–∫ –±–∞–∑—É –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è DevOps

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `pipeline_order.yaml` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ CI/CD
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (Sprint —Ç–µ–∫—É—â–∏–π):**
   - –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É fusion (–í–∞—Ä–∏–∞–Ω—Ç 1: –≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ docstrings

2. **–í —Å–ª–µ–¥—É—é—â–µ–º —Å–ø—Ä–∏–Ω—Ç–µ:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é `pipeline_order.yaml`
   - –ù–∞–ø–∏—Å–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

3. **–í –±—É–¥—É—â–µ–º:**
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –µ—â–µ –±–æ–ª—å—à–µ–π –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏
   - –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥ –≤ Langfuse
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìû –í–æ–ø—Ä–æ—Å—ã?

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω
**–§–∞–π–ª—ã:** –ó–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ –≤–µ—Ç–∫—É `claude/analyze-node-architecture-cLhSA`
**–ö–æ–º–º–∏—Ç:** d26e7fc - docs: Add comprehensive architectural analysis of RAG pipeline nodes

